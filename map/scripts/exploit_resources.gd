extends StaticResources
class_name ExploitResources

onready var base_animation_player := $AnimationPlayer
onready var vfx_hit: Sprite = $VFX_Hit
onready var vfx_animation_player: AnimationPlayer = vfx_hit.get_child(0)
onready var stats_manager = $StatsManager

var animation_player: AnimationPlayer

export(int, 60) var lvl: int = 1


func _ready() -> void:
	animation_player = base_animation_player.duplicate()
	add_child(animation_player)
	animation_player.connect("animation_finished", self, "_on_animation_finished")
	SignalManager.connect("death", self, "_on_death")


func _on_animation_finished(animation_name):
	Utils.on_resource_animation_finished(get_node("."), animation_name, vfx_hit)


func _on_death(_host_name):
	if _host_name == name:
		yield_item()
		animation_player.play("die")


func on_hit():
	pass


func create_hit_particle() -> void:
	vfx_hit.visible = true
	Utils.play_animation(vfx_animation_player, "hit")
